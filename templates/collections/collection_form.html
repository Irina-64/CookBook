{% extends "main/base.html" %}

{% block extra_css %}
<style>
/* Inline —Å—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–≥–æ —á–µ–∫–±–æ–∫—Å–∞ (fallback –¥–ª—è PythonAnywhere) */
.collection-form .form-check-input {
    width: 24px !important;
    height: 24px !important;
    transform: scale(1.5) !important;
    margin-right: 15px !important;
    margin-top: 0 !important;
}

.collection-form .form-check-label {
    font-size: 18px !important;
    font-weight: 500 !important;
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    margin-bottom: 0 !important;
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è */
.collection-form .form-check {
    display: flex !important;
    align-items: center !important;
    margin-bottom: 1rem !important;
}

.collection-form .form-check-input:checked {
    background-color: #007bff !important;
    border-color: #007bff !important;
}
</style>
{% endblock %}

{% block page_title %}
  <div class="text-center mb-4">
    <h1 class="display-4 text-primary">
      <i class="fas fa-{% if editing %}edit{% else %}plus-circle{% endif %} me-3"></i>
      {% if editing %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é{% else %}–°–æ–∑–¥–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é{% endif %}
    </h1>
    <hr class="border-primary" style="width: 300px; margin: 0 auto;">
  </div>
{% endblock %}

{% block content %}
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card border-primary shadow">
        <div class="card-header bg-primary text-white text-center">
          <h4 class="card-title mb-0">
            <i class="fas fa-folder me-2"></i>
            {% if editing %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏{% else %}–ù–æ–≤–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è{% endif %}
          </h4>
        </div>
        <div class="card-body collection-form">
          <form method="post">
            {% csrf_token %}
            
            <div class="form-group mb-3">
              <label for="{{ form.title.id_for_label }}" class="form-label">
                <i class="fas fa-tag me-1"></i>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:
              </label>
              {{ form.title }}
              {% if form.title.help_text %}
                <div class="form-text">{{ form.title.help_text }}</div>
              {% endif %}
            </div>


            <div class="form-group mb-4">
              <div class="form-check">
                {{ form.is_public }}
                <label class="form-check-label" for="{{ form.is_public.id_for_label }}" style="font-size: 18px;">
                  <i class="fas fa-globe me-2"></i>–ü—É–±–ª–∏—á–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
                </label>
                {% if form.is_public.help_text %}
                  <div class="form-text">{{ form.is_public.help_text }}</div>
                {% endif %}
              </div>
            </div>

            <div class="form-buttons">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save me-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
              </button>
              <a href="{% url 'collection_list' %}" class="btn btn-secondary">
                <i class="fas fa-times me-2"></i>–û—Ç–º–µ–Ω–∞
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
<script>
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞ (fallback –¥–ª—è PythonAnywhere)
document.addEventListener('DOMContentLoaded', function() {
    console.log('üîß –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–≥–æ —á–µ–∫–±–æ–∫—Å–∞');
    
    const checkbox = document.querySelector('.collection-form .form-check-input');
    const label = document.querySelector('.collection-form .form-check-label');
    const formCheck = document.querySelector('.collection-form .form-check');
    
    if (checkbox) {
        console.log('‚úÖ –ß–µ–∫–±–æ–∫—Å –Ω–∞–π–¥–µ–Ω, –ø—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏');
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ JavaScript
        checkbox.style.width = '24px';
        checkbox.style.height = '24px';
        checkbox.style.transform = 'scale(1.5)';
        checkbox.style.marginRight = '15px';
        checkbox.style.marginTop = '0';
        
        if (label) {
            label.style.fontSize = '18px';
            label.style.fontWeight = '500';
            label.style.display = 'flex';
            label.style.alignItems = 'center';
            label.style.gap = '8px';
            label.style.marginBottom = '0';
        }
        
        if (formCheck) {
            formCheck.style.display = 'flex';
            formCheck.style.alignItems = 'center';
            formCheck.style.marginBottom = '1rem';
        }
        
        console.log('‚úÖ –°—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ');
    } else {
        console.warn('‚ö†Ô∏è –ß–µ–∫–±–æ–∫—Å –Ω–µ –Ω–∞–π–¥–µ–Ω');
    }
});
</script>
{% endblock %}