{% extends "main/base.html" %}
{% block content %}
  <h1>–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</h1>

  <!-- –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ -->
  {% include 'search/compact_search_form.html' %}

  {% if recipes %}
    <div class="recipe-grid">
    {% for recipe in recipes %}
        <div class="recipe-card">
          <h3 class="recipe-title">
        <a href="{% url 'recipe_detail' recipe.pk %}">{{ recipe.title }}</a>
          </h3>
          
          
          <div class="recipe-meta">
            <p><strong>üë§ –ê–≤—Ç–æ—Ä:</strong> {{ recipe.author.username }}</p>
            {% if recipe.category %}
              <p><strong>üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ recipe.category.name }}</p>
            {% endif %}
            <p><strong>‚≠ê –†–µ–π—Ç–∏–Ω–≥:</strong> {{ recipe.rating }}</p>
            <p><strong>üìÖ –°–æ–∑–¥–∞–Ω:</strong> {{ recipe.created_at|date:"d.m.Y" }}</p>
            <p><strong>‚è±Ô∏è –í—Ä–µ–º—è:</strong> {{ recipe.cook_time }} –º–∏–Ω</p>
          </div>
          
          {% if recipe.description %}
            <p class="recipe-description">
              {{ recipe.description|truncatewords:20 }}
            </p>
          {% endif %}
        </div>
    {% endfor %}
    </div>
  {% else %}
    <div style="text-align: center; padding: 40px; color: #6c757d;">
      <p style="font-size: 18px;">–†–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
    </div>
  {% endif %}

  <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
  {% if is_paginated %}
    <div class="pagination" style="text-align: center; margin: 30px 0;">
      {% if page_obj.has_previous %}
        <a href="?page=1" style="padding: 8px 12px; margin: 0 5px; background: #007bff; color: white; text-decoration: none; border-radius: 5px;">&laquo; –ü–µ—Ä–≤–∞—è</a>
        <a href="?page={{ page_obj.previous_page_number }}" style="padding: 8px 12px; margin: 0 5px; background: #007bff; color: white; text-decoration: none; border-radius: 5px;">–ù–∞–∑–∞–¥</a>
      {% endif %}

      <span style="padding: 8px 12px; margin: 0 5px; background: #6c757d; color: white; border-radius: 5px;">–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}</span>

      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" style="padding: 8px 12px; margin: 0 5px; background: #007bff; color: white; text-decoration: none; border-radius: 5px;">–í–ø–µ—Ä—ë–¥</a>
        <a href="?page={{ page_obj.paginator.num_pages }}" style="padding: 8px 12px; margin: 0 5px; background: #007bff; color: white; text-decoration: none; border-radius: 5px;">–ü–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
      {% endif %}
    </div>
  {% endif %}
{% endblock %}
