{% extends "main/base.html" %}

{% block page_title %}
  <h1>–ú–æ–∏ —Ä–µ—Ü–µ–ø—Ç—ã</h1>
{% endblock %}

{% block content %}

  <!-- –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ -->
  {% include 'search/compact_search_form.html' %}

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞ -->
  <div style="margin: 20px 0; text-align: center;">
    <a href="{% url 'recipe_add' %}" style="display: inline-block; padding: 12px 24px; background: #28a745; color: white; text-decoration: none; border-radius: 5px; font-weight: bold; font-size: 16px;">
      ‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç
    </a>
  </div>

  {% if recipes %}
    <div class="recipe-grid">
      {% for recipe in recipes %}
        <div class="recipe-card">
          <h3 class="recipe-title">
            <a href="{% url 'recipe_detail' recipe.pk %}">{{ recipe.title }}</a>
          </h3>
          
          
          <div class="recipe-meta">
            <p><strong>üìÖ –°–æ–∑–¥–∞–Ω:</strong> {{ recipe.created_at|date:"d.m.Y" }}</p>
            {% if recipe.category %}
              <p><strong>üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ recipe.category.name }}</p>
            {% endif %}
            <p><strong>‚≠ê –†–µ–π—Ç–∏–Ω–≥:</strong> {{ recipe.rating }}</p>
            <p><strong>‚è±Ô∏è –í—Ä–µ–º—è:</strong> {{ recipe.cook_time }} –º–∏–Ω</p>
          </div>
          
          {% if recipe.description %}
            <p class="recipe-description">
              {{ recipe.description|truncatewords:20 }}
            </p>
          {% endif %}
          
          <div class="recipe-actions">
            <a href="{% url 'recipe_edit' recipe.pk %}" class="btn btn-primary">
              ‚úè –ò–∑–º–µ–Ω–∏—Ç—å
            </a>
            <a href="{% url 'recipe_delete' recipe.pk %}" class="btn btn-danger">
              üóë –£–¥–∞–ª–∏—Ç—å
            </a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- –ø–∞–≥–∏–Ω–∞—Ü–∏—è -->
  {% if is_paginated %}
    <div class="pagination">
      {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}">–ù–∞–∑–∞–¥</a>
      {% endif %}
      <span>–°—Ç—Ä. {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}</span>
      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">–í–ø–µ—Ä—ë–¥</a>
      {% endif %}
    </div>
  {% endif %}
{% endblock %}