<!-- search/templates/search/search_form.html -->
<form method="GET" action="{% url 'search' %}" class="search-form" style="margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 8px; border: 1px solid #ddd; display: flex; flex-wrap: wrap; gap: 12px; align-items: center; flex-direction: column;">

  <!-- –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É -->
  <div style="display: flex; align-items: center; gap: 8px; width: 100%; max-width: 800px;">
    <label for="id_q" style="font-weight: bold; min-width: 80px;">–ù–∞–π—Ç–∏:</label>
    <input
      type="text"
      name="q"
      id="id_q"
      value="{{ query }}"
      placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –∏–ª–∏ –∞–≤—Ç–æ—Ä–∞..."
      style="flex: 1; padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;"
    >
  </div>

  <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
  <div style="display: flex; align-items: center; gap: 8px; width: 100%; max-width: 800px;">
    <label for="id_category" style="font-weight: bold; min-width: 80px;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
    <select
      name="category"
      id="id_category"
      style="flex: 1; padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;"
    >
      <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
      {% for cat in categories %}
        <option value="{{ cat.slug }}" {% if selected_category == cat.slug %}selected{% endif %}>
          {{ cat.name }}
        </option>
      {% endfor %}
    </select>
  </div>

  <!-- –°–ª–æ–∂–Ω–æ—Å—Ç—å -->
  <div style="display: flex; align-items: center; gap: 8px; width: 100%; max-width: 800px;">
    <label for="id_difficulty" style="font-weight: bold; min-width: 80px;">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</label>
    <select
      name="difficulty"
      id="id_difficulty"
      style="flex: 1; padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;"
    >
      <option value="">–í—Å–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</option>
      <option value="easy" {% if selected_difficulty == 'easy' %}selected{% endif %}>–õ–µ–≥–∫–æ</option>
      <option value="medium" {% if selected_difficulty == 'medium' %}selected{% endif %}>–°—Ä–µ–¥–Ω–µ</option>
      <option value="hard" {% if selected_difficulty == 'hard' %}selected{% endif %}>–°–ª–æ–∂–Ω–æ</option>
    </select>
  </div>

  <!-- –í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è -->
  <div style="display: flex; align-items: center; gap: 8px; width: 100%; max-width: 800px;">
    <label for="id_min_cook_time" style="font-weight: bold; min-width: 100px;">–í—Ä–µ–º—è (–º–∏–Ω): </label>

    <span style="color: #666;">–æ—Ç</span>
    <input
      type="number"
      name="min_cook_time"
      id="id_min_cook_time"
      value="{{ min_cook_time }}"
      placeholder="–û—Ç"
      min="0"
      style="width: 100px; padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;"
    >
    <span style="color: #666;">–¥–æ</span>
    <input
      type="number"
      name="max_cook_time"
      id="id_max_cook_time"
      value="{{ max_cook_time }}"
      placeholder="–î–æ"
      min="0"
      style="width: 100px; padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;"
    >
  </div>

  <!-- –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–µ -->
  <div style="display: flex; align-items: center; gap: 15px; width: 100%; max-width: 800px; padding: 15px; background: #f8f9fa;">
    <label for="id_has_image" style="font-weight: bold; min-width: 120px; font-size: 16px; color: #495057;">–° –∫–∞—Ä—Ç–∏–Ω–∫–æ–π:</label>
    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
      <input type="checkbox" name="has_image" value="on" {% if has_image == 'on' %}checked{% endif %} style="transform: scale(2); margin-right: 5px;">
      <span style="font-size: 16px; font-weight: bold; color: #495057;">–¢–æ–ª—å–∫–æ —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π</span>
    </label>
  </div>

  <!-- –°–û–†–¢–ò–†–û–í–ö–ê -->
  <div style="display: flex; align-items: center; gap: 8px; width: 100%; max-width: 800px;">
    <label for="id_sort" style="font-weight: bold; min-width: 80px;">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:</label>
    <select
      name="sort_by"
      id="id_sort_by"
      style="flex: 1; padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;"
      onchange="this.form.submit()"  <!-- üöÄ –ê–≤—Ç–æ—Å–∞–±–º–∏—Ç –ø—Ä–∏ –≤—ã–±–æ—Ä–µ! -->
    >
      <option value="">‚Äî –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî</option>
      <option value="newest" {% if sort_by == 'newest' %}selected{% endif %}>–ù–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏</option>
      <option value="oldest" {% if sort_by == 'oldest' %}selected{% endif %}>–°—Ç–∞—Ä—ã–µ –ø–µ—Ä–≤—ã–º–∏</option>
      <option value="rating_high" {% if sort_by == 'rating_high' %}selected{% endif %}>–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–≤—ã—Å–æ–∫–∏–π)</option>
      <option value="rating_low" {% if sort_by == 'rating_low' %}selected{% endif %}>–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–Ω–∏–∑–∫–∏–π)</option>
      <option value="time_short" {% if sort_by == 'time_short' %}selected{% endif %}>–ü–æ –≤—Ä–µ–º–µ–Ω–∏ (–±—ã—Å—Ç—Ä—ã–µ)</option>
      <option value="time_long" {% if sort_by == 'time_long' %}selected{% endif %}>–ü–æ –≤—Ä–µ–º–µ–Ω–∏ (–¥–æ–ª–≥–∏–µ)</option>
      <option value="title_a_z" {% if sort_by == 'title_a_z' %}selected{% endif %}>–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)</option>
      <option value="title_z_a" {% if sort_by == 'title_z_a' %}selected{% endif %}>–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)</option>
    </select>
  </div>


  <!-- –ö–Ω–æ–ø–∫–∏ -->
  <div style="display: flex; gap: 10px; margin-top: 15px; width: 100%; max-width: 800px; justify-content: center;">
    <button
      type="submit"
      style="padding: 8px 20px; font-size: 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;"
    >
      –ü–æ–∏—Å–∫
    </button>

    {% if query or selected_category or selected_difficulty or min_cook_time or max_cook_time or has_image %}
      <a href="{% url 'search' %}" style="padding: 8px 16px; font-size: 16px; color: #666; text-decoration: none; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer;">
        –û—á–∏—Å—Ç–∏—Ç—å
      </a>
    {% endif %}
  </div>
</form>